(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,a){},170:function(e,t,a){e.exports=a(307)},304:function(e,t,a){},307:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),i=a.n(o),c=a(104),s=a(23);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(24),u=a(26),p=a(18),m=a(39),d=a(38),f=a(40),b=a(41),h=a(79),g=a(342),v=a(44),O=a(345),y=a(344),j=a(340),E=a(346),k=a(150),w=a.n(k),x=a(309),S=a(341),C=a(149),N=a(343),P=function(e){var t=e.label,a=e.input,n=e.meta,o=n.touched,i=n.invalid,c=n.error,s=(n.warning,Object(C.a)(e,["label","input","meta"]));return r.a.createElement(N.a,Object.assign({label:t,error:o&&i,helperText:o&&c},a,s))},I=a(350),R="APP_NOTIFICATION",T="CLEAR_APP_ERROR",F=a(339),_=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(e,t){"timeout"===t&&a.props.clearError()},a.state={open:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(I.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.open,onClose:this.handleClose,autoHideDuration:6e3,ContentProps:{"aria-describedby":"message-id"}},r.a.createElement(F.a,{style:{backgroundColor:this.props.error.type},message:r.a.createElement("span",{id:"client-snackbar"},this.props.error.message)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.error&&e.error.message?{open:!0}:{open:!1}}}]),t}(r.a.Component),L={clearError:function(){return{type:T}}},W=Object(l.connect)(function(e){return{error:e.application.error}},L)(_),U=function(e){return e||"number"===typeof e?"string"===typeof e&&""===e.trim()?"Spaces are not allowed as value!":void 0:"This field is required!"},A="USER_SET_TOKEN",D="USER_LOADING_STATE",q="USER_LOGIN",J="USER_LOGOUT",G=(a(116),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).onSubmit=function(e){a.props.doLogin(e)},a.state={loading:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.handleSubmit,t=this.state.loading;return r.a.createElement("div",{container:!0,component:"main",id:"main"},r.a.createElement("div",{className:"paper"},r.a.createElement(j.a,{className:"avatar"},r.a.createElement(w.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:"login-form",noValidate:!0,id:"loginForm",onSubmit:e(this.onSubmit)},r.a.createElement(O.a,{component:P,type:"text",variant:"outlined",margin:"normal",fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,validate:[U],disabled:t}),r.a.createElement(O.a,{component:P,type:"password",variant:"outlined",margin:"normal",fullWidth:!0,id:"password",label:"Password",name:"password",validate:[U],disabled:t}),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit-btn",disabled:t},"Sign In \xa0",t&&r.a.createElement(S.a,{size:24})))),r.a.createElement(W,null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.profile?(e.history.push("/"),Object(v.a)({},t)):e.loading!==t.loading?Object(v.a)({},t,{loading:e.loading}):t}}]),t}(r.a.Component)),M=Object(l.connect)(function(e){return{loading:e.user.loading||!1,profile:e.user.profile||void 0}},{doLogin:function(e){return{type:q,payload:e}}})(Object(y.a)({form:"loginForm"})(G)),z="GET",Y=["green","red","blue","violet","orange","pink","navy","teal","brown","olivedrab"],B=a(157),V=a(152),H=a.n(V),K=new B.a,$=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"setCookie",value:function(e,t){var a=new Date(H()().add(3,"d"));document.cookie=e+"="+t+";"+a+";path=/"}},{key:"set",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cookie";return"session"===a?sessionStorage.setItem(e,JSON.stringify(t)):"localstorage"===a?localStorage.setItem(e,JSON.stringify(t)):"string"===typeof t?this.setCookie(e,t):this.setCookie(e,JSON.stringify(t)),!0}},{key:"get",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cookie";t="session"===a?sessionStorage.getItem(e):"localstorage"===a?localStorage.getItem(e):K.get(e);try{return t?JSON.parse(t):""}catch(n){return t||""}}},{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cookie";return"session"===t?sessionStorage.removeItem(e):"localstorage"===t?localStorage.removeItem(e):K.remove(e),!0}}]),e}(),Q=a(308),X=a(153),Z=a(64),ee=a(87),te=a.n(ee);te.a.interceptors.request.use(function(e){var t;return(t=$.get("token"))&&(e.headers={Authorization:"bearer ".concat(t.token)}),e},function(e){return Promise.reject(e)}),te.a.interceptors.response.use(function(e){return{statusCode:e.status,data:("boolean"===typeof e.data&&!1===e.data?"false":e.data)||[]}},function(e){return e.response||"Network Error"!==e.message?Promise.reject(e.response.data||"Server Connection Failed"):Promise.reject("Couldn't connect to server. Please try again later.")});var ae=function(){function e(){Object(u.a)(this,e)}return Object(p.a)(e,null,[{key:"Request",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise(function(n,r){var o,i=(o={method:e,url:"https://swapi.co/api/"+t},Object(Z.a)(o,"GET"===e.toUpperCase()?"params":"data",a),Object(Z.a)(o,"headers",{"Content-Type":"application/json"}),o);te()(i).then(function(e){return n(e)}).catch(function(e){return r(e)})})}}]),e}(),ne=function(e){return ae.Request(z,"planets/",e)},re=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).logout=function(){$.clear("profile"),window.location.href="/"},a.onChange=function(e){a.setState({search:e.target.value,loading:!0}),ne({search:e.target.value}).then(function(e){e.data&&e.data.results&&(a.setState({planets:e.data.results,max:a.getMaxPopulation(e.data.results),loading:!1}),e.data.results.length||a.props.setNotification({message:"No Planet Found! :(",type:"red"}))}).catch(function(e){return a.setState({planets:[],max:0,loading:!1})})},a.getMaxPopulation=function(e){return Math.max.apply(Math,e.map(function(e){return parseInt(e.population)||0}))},a.setWidth=function(e){var t=parseInt(e)/a.state.max*100;return t>=100?"100%":"".concat(t,"%")},a.state={loading:!1,search:"",planets:[],max:0},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.planets,n=t.loading,o=t.search;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{item:!0,xs:12,sm:8,md:12,component:Q.a,elevation:0,square:!0},r.a.createElement("div",{className:""},r.a.createElement(x.a,{className:"heading",component:"h1",variant:"h5"},"Search for Planets..."),r.a.createElement("div",{className:"container"},r.a.createElement(E.a,{type:"button",variant:"contained",color:"primary",className:"submit-btn",onClick:this.logout},"Logout")),r.a.createElement("form",{className:"login-form",noValidate:!0,id:"loginForm"},r.a.createElement(X.DebounceInput,{element:N.a,minLength:1,debounceTimeout:300,type:"text",variant:"outlined",margin:"normal",fullWidth:!0,id:"planet",label:"Planet",name:"search",onChange:this.onChange})))),r.a.createElement("div",{className:"result",sm:4,md:7},r.a.createElement("div",{className:"spinner-position"},n&&r.a.createElement(S.a,null),o&&!n&&r.a.createElement("div",{className:"planets"},a.map(function(t,a){return r.a.createElement(oe,{key:t.name,idx:a,planet:t,setWidth:e.setWidth})}))),r.a.createElement("footer",null)))}}]),t}(r.a.PureComponent),oe=function(e){var t=e.planet,a=e.idx,n=e.setWidth;return r.a.createElement("div",{className:"rowcont",id:a,color:Y[a]},r.a.createElement("div",{className:"planet-title"},"\xa0",t.name," \xa0",r.a.createElement("small",null,"Total Population: ",t.population)),r.a.createElement("div",{className:"planet-color",style:{width:n(t.population),backgroundColor:Y[a]},key:t.name}))},ie=Object(l.connect)(function(e){return{loading:e.user.loading||!1,profile:e.user.profile||void 0}},{setNotification:function(e){return{type:R,error:e}}})(re),ce=(a(304),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={profile:null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.profile;return r.a.createElement(g.a,{container:!0,component:"main",id:"main"},e?r.a.createElement(ie,null):r.a.createElement(M,null),r.a.createElement(W,null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.profile?{profile:e.profile}:(e.history.push("/login"),null)}}]),t}(r.a.Component)),se=Object(l.connect)(function(e){return{profile:e.user.profile||void 0}})(ce),le=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(h.ConnectedRouter,{history:this.props.history},r.a.createElement(b.Switch,null,r.a.createElement(b.Route,{exact:!0,path:"/",component:se}),r.a.createElement(b.Route,{exact:!0,path:"/login",component:M})))}}]),t}(r.a.Component),ue=function(e){var t=e.store,a=e.history;return r.a.createElement(l.Provider,{store:t},r.a.createElement(le,{history:a}))},pe=a(16),me=a(158),de=a(156),fe=a(348),be={loading:!1,profile:$.get("profile")||void 0};var he={error:{message:"",type:"blue"}};var ge=Object(pe.c)({router:Object(h.connectRouter)(Object(s.a)()),form:fe.a,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(v.a)({},e,{loading:t.loading});case J:return Object(v.a)({},e,{profile:void 0});case A:return Object(v.a)({},e,{loading:t.loading,profile:t.data});default:return e}},application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(v.a)({},e,{error:t.error});case T:return Object(v.a)({},e,{error:""});default:return e}}}),ve=a(49),Oe=a.n(ve),ye=a(35),je=function(e){var t={search:e.username};return ae.Request(z,"people/",t)},Ee="Couldn't connect with server",ke=Oe.a.mark(xe),we=Oe.a.mark(Se);function xe(e){var t,a,n;return Oe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(ye.b)({type:D,loading:!0});case 2:return r.prev=2,r.next=5,Object(ye.a)(je,e.payload);case 5:if(t=r.sent,!(a=t.data)||1!==a.count){r.next=26;break}if(!(n=a.results[0])||!n.name||n.name.toLowerCase()===e.payload.username.toLowerCase()){r.next=14;break}return r.next=12,Object(ye.b)({type:R,error:{message:"User doesn't exists",type:"red"}});case 12:r.next=24;break;case 14:if(!n||!n.birth_year||n.birth_year!==e.payload.password){r.next=22;break}return r.next=17,Object(ye.b)({type:R,error:{message:"You've been loggedin successfully",type:"green"}});case 17:return r.next=19,Object(ye.b)({type:A,loading:!1,data:a});case 19:$.set("profile",n),r.next=24;break;case 22:return r.next=24,Object(ye.b)({type:R,error:{message:"You've entered incorrect password",type:"red"}});case 24:r.next=28;break;case 26:return r.next=28,Object(ye.b)({type:R,error:{message:"User doesn't exists",type:"red"}});case 28:return r.next=30,Object(ye.b)({type:D,loading:!1});case 30:r.next=38;break;case 32:return r.prev=32,r.t0=r.catch(2),r.next=36,Object(ye.b)({type:D,loading:!1});case 36:return r.next=38,Object(ye.b)({type:R,error:{message:r.t0&&r.t0.message||Ee,type:"red"}});case 38:case"end":return r.stop()}},ke,null,[[2,32]])}function Se(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ye.c)(q,xe);case 2:case"end":return e.stop()}},we)}var Ce=Oe.a.mark(Ne);function Ne(){return Oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield([Se()],"t0",1);case 1:case"end":return e.stop()}},Ce)}var Pe=function(e){var t=Object(me.a)(),a=Object(pe.a)(Object(de.a)(e),t),n=Object(pe.e)(ge,Object(pe.d)(a));return t.run(Ne),n},Ie=Object(s.a)(),Re=Pe(Ie);i.a.render(r.a.createElement(c.a,null,r.a.createElement(ue,{store:Re,history:Ie})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[170,1,2]]]);
//# sourceMappingURL=main.0dc58af7.chunk.js.map