(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{116:function(e,t,a){},170:function(e,t,a){e.exports=a(307)},304:function(e,t,a){},307:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),i=a.n(o),c=a(104),s=a(23);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(24),u=a(26),m=a(19),p=a(40),d=a(38),f=a(41),h=a(39),b=a(79),g=a(339),v=a(44),O=a(346),y=a(345),j=a(340),E=a(347),k=a(150),w=a.n(k),x=a(309),S=a(308),C=a(341),N=a(149),P=a(344),I=function(e){var t=e.label,a=e.input,n=e.meta,o=n.touched,i=n.invalid,c=n.error,s=(n.warning,Object(N.a)(e,["label","input","meta"]));return r.a.createElement(P.a,Object.assign({label:t,error:o&&i,helperText:o&&c},a,s))},R=function(e){return e||"number"===typeof e?"string"===typeof e&&""===e.trim()?"Spaces are not allowed as value!":void 0:"This field is required!"},T="USER_SET_TOKEN",W="USER_LOADING_STATE",_="USER_LOGIN",F="USER_LOGOUT",L=(a(116),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).onSubmit=function(e){a.props.doLogin(e)},a.state={loading:!1},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.handleSubmit,t=this.state.loading;return r.a.createElement(g.a,{container:!0,component:"main",id:"main"},r.a.createElement(g.a,{item:!0,xs:!1,sm:4,md:7,className:"left-image"}),r.a.createElement(g.a,{item:!0,xs:12,sm:8,md:5,component:S.a,elevation:6,square:!0},r.a.createElement("div",{className:"paper"},r.a.createElement(j.a,{className:"avatar"},r.a.createElement(w.a,null)),r.a.createElement(x.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:"login-form",noValidate:!0,id:"loginForm",onSubmit:e(this.onSubmit)},r.a.createElement(O.a,{component:I,type:"text",variant:"outlined",margin:"normal",fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,validate:[R],disabled:t}),r.a.createElement(O.a,{component:I,type:"password",variant:"outlined",margin:"normal",fullWidth:!0,id:"password",label:"Password",name:"password",validate:[R],disabled:t}),r.a.createElement(E.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit-btn",disabled:t},"Sign In \xa0",t&&r.a.createElement(C.a,{size:24}))))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.profile?(e.history.push("/"),Object(v.a)({},t)):e.loading!==t.loading?Object(v.a)({},t,{loading:e.loading}):t}}]),t}(r.a.Component)),U=Object(l.connect)(function(e){return{loading:e.user.loading||!1,profile:e.user.profile||void 0}},{doLogin:function(e){return{type:_,payload:e}}})(Object(y.a)({form:"loginForm"})(L)),q="GET",A=["green","red","blue","voilet","orange","pink","navy","teal","brown","grey"],D=a(157),J=a(152),G=a.n(J),M=new D.a,z=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,null,[{key:"setCookie",value:function(e,t){var a=new Date(G()().add(3,"d"));document.cookie=e+"="+t+";"+a+";path=/"}},{key:"set",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"cookie";return"session"===a?sessionStorage.setItem(e,JSON.stringify(t)):"localstorage"===a?localStorage.setItem(e,JSON.stringify(t)):"string"===typeof t?this.setCookie(e,t):this.setCookie(e,JSON.stringify(t)),!0}},{key:"get",value:function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cookie";t="session"===a?sessionStorage.getItem(e):"localstorage"===a?localStorage.getItem(e):M.get(e);try{return t?JSON.parse(t):""}catch(n){return t||""}}},{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cookie";return"session"===t?sessionStorage.removeItem(e):"localstorage"===t?localStorage.removeItem(e):M.remove(e),!0}}]),e}(),Y=a(153),B=a(342),V=a(64),H=a(87),K=a.n(H);K.a.interceptors.request.use(function(e){var t;return(t=z.get("token"))&&(e.headers={Authorization:"bearer ".concat(t.token)}),e},function(e){return Promise.reject(e)}),K.a.interceptors.response.use(function(e){return{statusCode:e.status,data:("boolean"===typeof e.data&&!1===e.data?"false":e.data)||[]}},function(e){return e.response||"Network Error"!==e.message?Promise.reject(e.response.data||"Server Connection Failed"):Promise.reject("Couldn't connect to server. Please try again later.")});var $=function(){function e(){Object(u.a)(this,e)}return Object(m.a)(e,null,[{key:"Request",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise(function(n,r){var o,i=(o={method:e,url:"https://swapi.co/api/"+t},Object(V.a)(o,"GET"===e.toUpperCase()?"params":"data",a),Object(V.a)(o,"headers",{"Content-Type":"application/json"}),o);K()(i).then(function(e){return n(e)}).catch(function(e){return r(e)})})}}]),e}(),Q=function(e){return $.Request(q,"planets/",e)},X=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).logout=function(){z.clear("profile"),window.location.href="/"},a.onChange=function(e){a.setState({search:e.target.value,loading:!0}),Q({search:e.target.value}).then(function(e){e.data&&e.data.results&&a.setState({planets:e.data.results,max:a.getMaxPopulation(e.data.results),loading:!1})})},a.getMaxPopulation=function(e){return Math.max.apply(Math,e.map(function(e){return parseInt(e.population)||0}))},a.setWidth=function(e){var t=parseInt(e)/a.state.max*100;return t>=100?"100%":"".concat(t,"%")},a.state={loading:!1,search:"",planets:[],max:0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.planets,n=t.loading,o=t.search;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a,{item:!0,xs:12,sm:8,md:5,component:S.a,elevation:6,square:!0},r.a.createElement("div",{className:"paper"},r.a.createElement(x.a,{component:"h1",variant:"h5"},"Search for Planets..."),r.a.createElement("form",{className:"login-form",noValidate:!0,id:"loginForm"},r.a.createElement(Y.DebounceInput,{element:P.a,minLength:1,debounceTimeout:300,type:"text",variant:"outlined",margin:"normal",fullWidth:!0,id:"planet",label:"Planet",name:"search",onChange:this.onChange})))),r.a.createElement(g.a,{item:!0,xs:!1,sm:4,md:7,className:"left-image relative"},r.a.createElement("div",{className:"overlayer"},n&&r.a.createElement(C.a,null),o&&!n&&r.a.createElement("div",{className:"planets"},a.map(function(t,a){return r.a.createElement(Z,{key:t.name,idx:a,planet:t,setWidth:e.setWidth})}))),r.a.createElement("footer",null,r.a.createElement(B.a,{maxWidth:"sm"},r.a.createElement(E.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:"submit-btn",onClick:this.logout},"Logout")))))}}]),t}(r.a.PureComponent),Z=function(e){var t=e.planet,a=e.idx,n=e.setWidth;return r.a.createElement("div",{className:"rowcont"},r.a.createElement("div",{className:"planet-title"},"\xa0",t.name," \xa0",r.a.createElement("small",null,"Total Population: ",t.population)),r.a.createElement("div",{className:"planet-color",style:{width:n(t.population),backgroundColor:A[a]},key:t.name}))},ee=Object(l.connect)(function(e){return{loading:e.user.loading||!1,profile:e.user.profile||void 0}})(X),te=a(351),ae="APP_NOTIFICATION",ne="CLEAR_APP_ERROR",re=a(343),oe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).handleClose=function(e,t){"timeout"===t&&a.props.clearError()},a.state={open:!1},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(te.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.state.open,onClose:this.handleClose,autoHideDuration:6e3,ContentProps:{"aria-describedby":Math.random()+"id"}},r.a.createElement(re.a,{style:{backgroundColor:this.props.error.type},message:r.a.createElement("span",{id:"client-snackbar"},this.props.error.message)}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.error&&e.error.message?{open:!0}:{open:!1}}}]),t}(r.a.Component),ie={clearError:function(){return{type:ne}}},ce=Object(l.connect)(function(e){return{error:e.application.error}},ie)(oe),se=(a(304),function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(d.a)(t).call(this,e))).state={profile:null},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.profile;return r.a.createElement(g.a,{container:!0,component:"main",id:"main"},e?r.a.createElement(ee,null):r.a.createElement(U,null),r.a.createElement(ce,null))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.profile?{profile:e.profile}:(e.history.push("/login"),null)}}]),t}(r.a.Component)),le=Object(l.connect)(function(e){return{profile:e.user.profile||void 0}})(se),ue=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(b.ConnectedRouter,{history:this.props.history},r.a.createElement(h.Switch,null,r.a.createElement(h.Route,{exact:!0,path:"/",component:le}),r.a.createElement(h.Route,{exact:!0,path:"/login",component:U})))}}]),t}(r.a.Component),me=function(e){var t=e.store,a=e.history;return r.a.createElement(l.Provider,{store:t},r.a.createElement(ue,{history:a}))},pe=a(16),de=a(158),fe=a(156),he=a(350),be={loading:!1,profile:z.get("profile")||void 0};var ge={error:{message:"",type:"blue"}};var ve=Object(pe.c)({router:Object(b.connectRouter)(Object(s.a)()),form:he.a,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(v.a)({},e,{loading:t.loading});case F:return Object(v.a)({},e,{profile:void 0});case T:return Object(v.a)({},e,{loading:t.loading,profile:t.data});default:return e}},application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return Object(v.a)({},e,{error:t.error});case ne:return Object(v.a)({},e,{error:""});default:return e}}}),Oe=a(49),ye=a.n(Oe),je=a(35),Ee=function(e){var t={search:e.username};return $.Request(q,"people/",t)},ke="Couldn't connect with server",we=ye.a.mark(Se),xe=ye.a.mark(Ce);function Se(e){var t,a,n;return ye.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(je.b)({type:W,loading:!0});case 2:return r.prev=2,r.next=5,Object(je.a)(Ee,e.payload);case 5:if(t=r.sent,!(a=t.data)||1!==a.count){r.next=26;break}if(!(n=a.results[0])||!n.name||n.name.toLowerCase()===e.payload.username.toLowerCase()){r.next=14;break}return r.next=12,Object(je.b)({type:ae,error:{message:"User doesn't exists",type:"red"}});case 12:r.next=24;break;case 14:if(!n||!n.birth_year||n.birth_year!==e.payload.password){r.next=22;break}return r.next=17,Object(je.b)({type:ae,error:{message:"You've been loggedin successfully",type:"green"}});case 17:return r.next=19,Object(je.b)({type:T,loading:!1,data:a});case 19:z.set("profile",n),r.next=24;break;case 22:return r.next=24,Object(je.b)({type:ae,error:{message:"You've entered incorrect password",type:"red"}});case 24:r.next=28;break;case 26:return r.next=28,Object(je.b)({type:ae,error:{message:"User doesn't exists",type:"red"}});case 28:r.next=36;break;case 30:return r.prev=30,r.t0=r.catch(2),r.next=34,Object(je.b)({type:W,loading:!1});case 34:return r.next=36,Object(je.b)({type:ae,error:{message:r.t0&&r.t0.message||ke,type:"red"}});case 36:case"end":return r.stop()}},we,null,[[2,30]])}function Ce(){return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(je.c)(_,Se);case 2:case"end":return e.stop()}},xe)}var Ne=ye.a.mark(Pe);function Pe(){return ye.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield([Ce()],"t0",1);case 1:case"end":return e.stop()}},Ne)}var Ie=function(e){var t=Object(de.a)(),a=Object(pe.a)(Object(fe.a)(e),t),n=Object(pe.e)(ve,Object(pe.d)(a));return t.run(Pe),n},Re=Object(s.a)(),Te=Ie(Re);i.a.render(r.a.createElement(c.a,null,r.a.createElement(me,{store:Te,history:Re})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[170,1,2]]]);
//# sourceMappingURL=main.e1b66e00.chunk.js.map